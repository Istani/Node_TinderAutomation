!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("@babel/runtime/regenerator"),require("@babel/runtime/helpers/asyncToGenerator"),require("axios"),require("@babel/runtime/helpers/slicedToArray"),require("puppeteer")):"function"==typeof define&&define.amd?define(["exports","@babel/runtime/regenerator","@babel/runtime/helpers/asyncToGenerator","axios","@babel/runtime/helpers/slicedToArray","puppeteer"],r):r((e=e||self)["tinder-access-token-generator"]={},e._regeneratorRuntime,e._asyncToGenerator,e.axios,e._slicedToArray,e.puppeteer)}(this,function(e,r,t,n,a,s){"use strict";function o(){return u.apply(this,arguments)}function u(){return(u=t(r.mark(function e(t){var n,o,u,i,c,p,d,l,f,h,_;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.emailAddress,o=t.password,e.next=3,s.launch({headless: true, args:['--no-sandbox']});case 3:return u=e.sent,e.next=6,u.newPage();case 6:return i=e.sent,e.next=9,i.goto("https://www.facebook.com/v2.6/dialog/oauth?redirect_uri=fb464891386855067%3A%2F%2Fauthorize%2F&scope=user_birthday%2Cuser_photos%2Cuser_education_history%2Cemail%2Cuser_relationship_details%2Cuser_friends%2Cuser_work_history%2Cuser_likes&response_type=token%2Csigned_request&client_id=464891386855067&ret=login&fallback_redirect_uri=221e1158-f2e9-1452-1a05-8983f99f7d6e&ext=1556057433&hash=Aea6jWwMP_tDMQ9y");case 9:return e.next=11,i.click("#email");case 11:return e.next=13,i.keyboard.type(n);case 13:return e.next=15,i.click("#pass");case 15:return e.next=17,i.keyboard.type(o);case 17:return e.next=19,Promise.all([i.waitForNavigation(),i.click("#loginbutton")]);case 19:return e.next=21,i.waitForSelector('button[name="__CONFIRM__"]');case 21:return e.next=23,Promise.all([i.waitForResponse(function(e){return e.url().endsWith("/dialog/oauth/confirm/")}),i.click('button[name="__CONFIRM__"]')]);case 23:return c=e.sent,p=a(c,1),d=p[0],e.next=28,d.text();case 28:return l=e.sent,f="access_token=",h=l.indexOf(f)+f.length,_=l.indexOf("&",h),e.next=34,u.close();case 34:return e.abrupt("return",l.substring(h,_));case 35:case"end":return e.stop()}},e)}))).apply(this,arguments)}function i(){return(i=t(r.mark(function e(t){var a,s,u,i;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.facebookEmailAddress,s=t.facebookPassword,e.next=3,o({emailAddress:a,password:s});case 3:return u=e.sent,e.next=6,n.post("https://api.gotinder.com/v2/auth/login/facebook",{token:u});case 6:return i=e.sent,e.abrupt("return",{apiToken:i.data.data.api_token,refreshToken:i.data.data.refresh_token});case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function c(){return(c=t(r.mark(function e(t){var a,s,o;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.apiToken,s=t.refreshToken,e.next=3,n.post("https://api.gotinder.com/v2/auth",{grant_type:"refresh_token",refresh_token:s},{headers:{"X-Auth-Token":a}});case 3:return o=e.sent,e.abrupt("return",{apiToken:o.data.data.api_token,refreshToken:o.data.data.refresh_token});case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}r=r&&r.hasOwnProperty("default")?r.default:r,t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n,a=a&&a.hasOwnProperty("default")?a.default:a,s=s&&s.hasOwnProperty("default")?s.default:s,e.generateToken=function(){return i.apply(this,arguments)},e.refreshCredentials=function(){return c.apply(this,arguments)},Object.defineProperty(e,"__esModule",{value:!0})});
